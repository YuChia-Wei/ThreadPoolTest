### **K6 效能測試報告：預設執行緒集區 (Raw Streaming)**

**測試完成時間:** 2025-07-04T11:54:51Z (UTC)

#### **測試情境**

本次測試旨在評估 Raw Streaming 檔案上傳 API (`/upload/raw-streaming`) 在高負載下的效能表現。應用程式在啟動時，預先將最小執行緒集區數量設定為 256。

- **並發使用者數 (VUs):** 200
- **持續時間:** 5 分鐘
- **目標 RPS (每秒請求數):** 50

---

#### **核心效能指標**

| 指標 | 結果 |
| :--- | :--- |
| **總請求數** | 6,305 |
| **每秒請求數** | 19.77 |
| **成功率** | 99.89% |
| **失敗率** | 0.11% (7 個請求失敗) |
| **總傳輸資料量** | 33 GB |

---

#### **請求延遲分析**

- **平均值 (avg):** 9.78s
- **中位數 (med):** 7.27s
- **P90 (90百分位數):** 21.52s
- **P95 (95百分位數):** **27.36s**
- **最大值 (max):** 1分 1秒

---

#### **分析與結論**

1.  **效能嚴重不達標:** 本次測試最關鍵的效能門檻「`p(95) < 3000ms`」**完全沒有通過**。高達 **27.36 秒** 的 P95 延遲時間，意味著絕大多數使用者在測試負載下，都經歷了極長的等待時間，服務處於無回應狀態。

2.  **高吞吐量但延遲嚴重:** 雖然應用程式成功處理了大量資料 (33 GB)，但極高的延遲清楚地顯示請求處理流程中存在瓶頸。系統能夠處理資料流，卻無法及時完成單一請求。

3.  **低失敗率具誤導性:** 雖然失敗率 (0.11%) 很低，但這個數據在無法接受的延遲面前顯得無足輕重。這些失敗的請求，很可能是由客戶端或伺服器端的超時或資源耗盡所引起，而這些正是底層效能問題的症狀。

**結論:** 預先設定執行緒集區數量為 256，並**沒有**解決 Raw Streaming 端點的效能問題。瓶頸存在於其他地方，很可能是在檔案處理的 I/O 操作，或是應用程式邏輯中其他無法透過增加執行緒來擴展的部分。建議使用分析工具 (Profiler) 進行更深入的追蹤，以找出造成延遲的確切原因。
